describe('YourComponent', () => {
  let component: YourComponent;

  beforeEach(() => {
    TestBed.configureTestingModule({
      declarations: [YourComponent],
    });

    const fixture = TestBed.createComponent(YourComponent);
    component = fixture.componentInstance;
  });

  it('should override styles and observe iframe resize', () => {
    // Mock body element
    const mockBody = {
      style: {},
    };

    // Mock iframe document
    const mockIframeDoc = {
      getElementById: jasmine.createSpy().and.returnValue(mockBody),
    } as any;

    // Mock iframe element
    const mockIframeEl = {
      contentDocument: mockIframeDoc,
      contentWindow: { document: mockIframeDoc },
      style: {},
    } as any;

    // Spy on the style override method
    spyOn(component, 'overrideIframeInsideDivStyle').and.callThrough();

    // Mock ResizeObserver globally
    const observeSpy = jasmine.createSpy('observe');
    (window as any).ResizeObserver = function (cb: any) {
      // Immediately call the callback to simulate resize event
      cb();
      return {
        observe: observeSpy,
        disconnect: jasmine.createSpy('disconnect'),
      };
    };

    // Simulate your logic
    const iframeDoc = mockIframeEl.contentDocument || mockIframeEl.contentWindow.document;
    const body = iframeDoc.getElementById('root');

    component.overrideIframeInsideDivStyle(body);

    component['resizeObserver'] = new ResizeObserver(() => {
      component.overrideIframeInsideDivStyle(body);
    });

    component['resizeObserver'].observe(mockIframeEl);

    // Assertions
    expect(iframeDoc.getElementById).toHaveBeenCalledWith('root');
    expect(component.overrideIframeInsideDivStyle).toHaveBeenCalledTimes(2); // once directly, once from observer
    expect(observeSpy).toHaveBeenCalledWith(mockIframeEl);
  });
});
