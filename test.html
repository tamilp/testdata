// MFE1 - sender
const key = 'myKey';
const value = 'NewValue';

sessionStorage.setItem(key, value);

window.dispatchEvent(new CustomEvent('session-storage-change', {
  detail: { key, value }
}));


// MFE2 - receiver (e.g., inside ngOnInit)
ngOnInit(): void {
  window.addEventListener('session-storage-change', this.handleStorageUpdate);
}

ngOnDestroy(): void {
  window.removeEventListener('session-storage-change', this.handleStorageUpdate);
}

handleStorageUpdate = (event: any) => {
  const { key, value } = event.detail;
  if (key === 'myKey') {
    // Take any action needed, like updating local state or triggering UI changes
    console.log('Detected sessionStorage change from MFE1:', value);
  }
};
