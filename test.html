import { AfterViewInit, Component, OnDestroy } from '@angular/core';

@Component({
  selector: 'app-my-component',
  templateUrl: './my-component.component.html',
})
export class MyComponent implements AfterViewInit, OnDestroy {
  private resizeObserver!: ResizeObserver;

  ngAfterViewInit() {
    const iframeEl = document.getElementById('myDynamicIframe') as HTMLIFrameElement;

    if (iframeEl) {
      this.resizeObserver = new ResizeObserver((entries) => {
        for (const entry of entries) {
          const rect = entry.contentRect;
          console.log(`Iframe resized: width=${rect.width}, height=${rect.height}`);

          // Override styles here if needed
          iframeEl.style.border = '3px solid blue';
        }
      });

      this.resizeObserver.observe(iframeEl);
    } else {
      console.warn('Iframe not found in DOM!');
    }
  }

  ngOnDestroy() {
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
    }
  }
}
