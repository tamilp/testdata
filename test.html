const fs = require("fs");

function splitJson(inputFile, numFiles) {
  const raw = fs.readFileSync(inputFile, "utf-8");
  const data = JSON.parse(raw);

  if (!Array.isArray(data)) {
    console.error("JSON root must be an array");
    return;
  }

  const chunkSize = Math.ceil(data.length / numFiles);

  for (let i = 0; i < numFiles; i++) {
    const chunk = data.slice(i * chunkSize, (i + 1) * chunkSize);

    if (chunk.length > 0) {
      const fileName = `output_${i + 1}.json`;
      fs.writeFileSync(fileName, JSON.stringify(chunk, null, 2));
      console.log(`Created ${fileName} with ${chunk.length} records`);
    }
  }
}

// ===== RUN =====
splitJson("input.json", 3);
