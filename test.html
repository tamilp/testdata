describe('MyComponent', () => {
  let component: MyComponent;

  beforeEach(() => {
    TestBed.configureTestingModule({
      declarations: [MyComponent]
    });

    const fixture = TestBed.createComponent(MyComponent);
    component = fixture.componentInstance;
  });

  it('should apply styles and observe iframe resize', () => {
    // Mock iframe, document, and body
    const mockBody = {
      style: {},
    } as any;

    const mockIframeDoc = {
      body: mockBody
    } as Document;

    const mockIframe = {
      contentDocument: mockIframeDoc,
      style: {},
    } as unknown as HTMLIFrameElement;

    // Spy on overrideIframeBodyStyle
    spyOn(component, 'overrideIframeBodyStyle').and.callThrough();

    // Mock ResizeObserver
    const observeSpy = jasmine.createSpy('observe');
    (window as any).ResizeObserver = function(callback: any) {
      return {
        observe: observeSpy,
        disconnect: jasmine.createSpy('disconnect')
      };
    };

    component.applyIframeStylingAndObserver(mockIframe);

    expect(component.overrideIframeBodyStyle).toHaveBeenCalledWith(mockBody);
    expect(observeSpy).toHaveBeenCalledWith(mockIframe);
  });
});
